<script>
  const videos = [
    { id: "kJQP7kiw5Fk", title: "Despacito" },
    { id: "09R8_2nJtjg", title: "Sugar - Maroon 5" },
    { id: "YQHsXMglC9A", title: "Hello - Adele" }
  ];

  const snippetDurations = [0.5, 1, 2, 4, 8, 16];
  let currentIndex = 0;
  let hintIndex = 0;
  let player;
  let playTimeout;

  function loadVideo(index) {
    document.getElementById("videoTitle").innerText = "ðŸŽ¶ Guess the Song!";
    hintIndex = 0;
    player.loadVideoById(videos[index].id);
  }

  function playNextSnippet() {
    clearTimeout(playTimeout);

    if (hintIndex >= snippetDurations.length) {
      document.getElementById("videoTitle").innerText = "No more hints!";
      return;
    }

    const duration = snippetDurations[hintIndex];
    player.seekTo(0);
    player.playVideo();
    document.getElementById("videoTitle").innerText = `Hint: ${duration} seconds`;

    playTimeout = setTimeout(() => {
      player.pauseVideo();
      hintIndex++;
    }, duration * 1000);
  }

  function revealAnswer() {
    document.getElementById("videoTitle").innerText = `ðŸŽµ Answer: ${videos[currentIndex].title}`;
  }

  function nextVideo() {
    clearTimeout(playTimeout);
    currentIndex = (currentIndex + 1) % videos.length;
    loadVideo(currentIndex);
  }

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '0',
      width: '0',
      videoId: videos[0].id,
      events: {
        onReady: () => loadVideo(0)
      }
    });
  }
</script>
